<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Echo_Sxl</title>
  <subtitle>-=</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://www.songxiaolang.com/"/>
  <updated>2018-02-04T06:20:16.034Z</updated>
  <id>http://www.songxiaolang.com/</id>
  
  <author>
    <name>Echo_Sxl</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>java执行cmd命令是遇到一些特殊字符处理丢失</title>
    <link href="http://www.songxiaolang.com/2018/02/02/java_execCommand_StreamGobbler/"/>
    <id>http://www.songxiaolang.com/2018/02/02/java_execCommand_StreamGobbler/</id>
    <published>2018-02-02T14:12:33.000Z</published>
    <updated>2018-02-04T06:20:16.034Z</updated>
    
    <summary type="html">
    
      &lt;h4 id=&quot;：当时要执行kettle命令的时候，遇到kettle的命令符号丢失-如果是linux环境，使用入戏下接口：&quot;&gt;&lt;a href=&quot;#：当时要执行kettle命令的时候，遇到kettle的命令符号丢失-如果是linux环境，使用入戏下接口：&quot; class=&quot;headerlink&quot; title=&quot;：当时要执行kettle命令的时候，遇到kettle的命令符号丢失,如果是linux环境，使用入戏下接口：&quot;&gt;&lt;/a&gt;：当时要执行kettle命令的时候，遇到kettle的命令符号丢失,如果是linux环境，使用入戏下接口：&lt;/h4&gt;&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;26&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;27&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;28&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;29&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;30&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;31&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;32&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;33&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;34&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;35&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;36&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;37&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;38&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;39&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;40&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;41&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;42&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;43&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;44&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;45&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;46&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;47&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;48&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;49&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;50&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;51&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;52&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;53&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;54&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;55&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;56&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;57&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;58&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;59&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;60&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;61&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;62&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;63&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;64&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;65&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;66&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;67&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;68&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;69&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;70&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;71&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;72&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;73&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;74&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;75&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;76&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;77&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;78&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;79&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;80&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;81&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;82&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;83&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;84&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;85&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;86&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;87&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;88&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;89&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;90&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;91&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;92&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;93&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;94&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;95&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;96&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;97&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;98&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;99&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;100&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;101&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;102&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;103&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;104&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;105&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;106&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;107&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;108&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;109&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;110&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;111&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;112&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;113&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;114&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;115&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;116&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;117&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;118&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;119&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;120&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;121&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;122&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;123&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;124&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;125&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;126&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;127&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;128&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;129&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;130&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;131&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;132&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;133&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;134&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;135&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;136&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;137&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;138&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;139&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;140&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;141&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;142&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;package com.pactera.common.util;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; com.alibaba.fastjson.JSONObject;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.cli.*;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.exec.CommandLine;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.exec.*;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; org.junit.Test;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; java.io.ByteArrayOutputStream;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; java.util.Collection;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/**&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; * @author song&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; * @date created in 2018-01-19 18:49&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; */&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;public &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;ExecuteShell&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    public &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; JSONObject callCMD(&lt;span class=&quot;built_in&quot;&gt;String&lt;/span&gt; shellInfo) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        System.out.println(&lt;span class=&quot;string&quot;&gt;&quot;Cmd接收到的命令---&quot;&lt;/span&gt;+shellInfo);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        JSONObject json = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; JSONObject();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;String&lt;/span&gt; error = &lt;span class=&quot;string&quot;&gt;&quot;&quot;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        int execute = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;String&lt;/span&gt; out=&lt;span class=&quot;string&quot;&gt;&quot;&quot;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;try&lt;/span&gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            CommandLine commandline = CommandLine.parse(shellInfo);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            DefaultExecutor exec = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; DefaultExecutor();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            exec.setExitValue(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            ExecuteWatchdog watchdog = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; ExecuteWatchdog(&lt;span class=&quot;number&quot;&gt;600&lt;/span&gt; * &lt;span class=&quot;number&quot;&gt;1000&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            exec.setWatchdog(watchdog);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            ByteArrayOutputStream outputStream = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; ByteArrayOutputStream();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            ByteArrayOutputStream errorStream = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; ByteArrayOutputStream();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            PumpStreamHandler streamHandler = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; PumpStreamHandler(outputStream, errorStream);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            exec.setStreamHandler(streamHandler);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            execute = exec.execute(commandline);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            out = outputStream.toString(&lt;span class=&quot;string&quot;&gt;&quot;gbk&quot;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            error = errorStream.toString(&lt;span class=&quot;string&quot;&gt;&quot;gbk&quot;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            System.out.println(out);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            System.out.println(error);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125; &lt;span class=&quot;keyword&quot;&gt;catch&lt;/span&gt; (Exception e) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            json.put(&lt;span class=&quot;string&quot;&gt;&quot;statusCode&quot;&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            json.put(&lt;span class=&quot;string&quot;&gt;&quot;msg&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;Failed to call shell&#39;s command and the return status&#39;s is:1 &quot;&lt;/span&gt;+error );&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        json.put(&lt;span class=&quot;string&quot;&gt;&quot;statusCode&quot;&lt;/span&gt; , execute);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        json.put(&lt;span class=&quot;string&quot;&gt;&quot;msg&quot;&lt;/span&gt; , out);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt;  json;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;/**&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;     * 创建commandline对象&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;     *&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;     * @param args&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;     * @return&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;     * @throws ParseException&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;     */&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    private &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; CommandLine getCommandLine(&lt;span class=&quot;built_in&quot;&gt;String&lt;/span&gt; args, Options mergeOptions) throws ParseException &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        CommandLineParser parser = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; DefaultParser();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        HelpFormatter hf = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; HelpFormatter();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        hf.printHelp(args, &lt;span class=&quot;string&quot;&gt;&quot;&quot;&lt;/span&gt;, mergeOptions, &lt;span class=&quot;string&quot;&gt;&quot;&quot;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//        return parser.parse(mergeOptions, new String[]&amp;#123;args&amp;#125;);&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;null&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;/**&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;     * 合并options&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;     *&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;     * @param optionsArgs options项&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;     * @return 合并后的options&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;     */&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    private &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; Options mergeOptions(Options... optionsArgs) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        Options allOptions = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; Options(); &lt;span class=&quot;comment&quot;&gt;// 合并所有options，如果不合并单独使用，会出现问题&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (Options options : optionsArgs) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            Collection&amp;lt;Option&amp;gt; options1 = options.getOptions();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (Option option : options1) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                allOptions.addOption(option);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; allOptions;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    @Test&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    public &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; test() throws ParseException &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// 模拟命令行参数&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;String&lt;/span&gt; args = &lt;span class=&quot;string&quot;&gt;&quot;sdo&quot;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;comment&quot;&gt;/*  public static void main(String[] args) throws ParseException &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        String argss[]=&amp;#123;&quot;-t  1000&quot;&amp;#125;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        //定义&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        Options options = new Options();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        options.addOption(&quot;ipconfig&quot;, false, &quot;list help&quot;);//false代表不强制有&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        options.addOption(&quot;ipconfig&quot;, true, &quot;set time on system&quot;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        //解析&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        //1.3.1中已经弃用针对不同格式入参对应的解析器&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        //CommandLineParser parser = new PosixParser();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        CommandLineParser parser = new DefaultParser();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        CommandLine cmd = parser.parse(options, args);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        //查询交互&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        //你的程序应当写在这里，从这里启动&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            String formatstr = &quot;ipconfig&quot;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            HelpFormatter hf = new HelpFormatter();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            hf.printHelp(formatstr, &quot;&quot;, options, &quot;&quot;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            return;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;*/&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    public &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; main(&lt;span class=&quot;built_in&quot;&gt;String&lt;/span&gt;[] args) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;try&lt;/span&gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;String&lt;/span&gt; command = &lt;span class=&quot;string&quot;&gt;&quot; E:\\tool\\data-integration\\kitchen.bat /rep:kettle /dir:/ /user:admin /pass:admin /level:Basic /job:EDW_FENFA_JOB -param:\&quot;DBTYPE=ORACLE\&quot;  -param:\&quot;TABLE_NAME=omdata.S24_SEAT_HISTORY\&quot;  -param:\&quot;EDW_TABLE_NAME=S24_SEAT_HISTORY\&quot;  -param:\&quot;COLUMNS=T.ID,T.BUS_ID,T.LAST_REST,T.REST,T.LAST_UPDATETIME,T.UPDATE_TIME\&quot;  -param:\&quot;USER_NAME=yyy\&quot;  -param:\&quot;CONDITIONS=TO_DATE(&#39;20160310&#39;,&#39;YYYYMMDD&#39;)=T.ETL_DT\&quot;   -param:\&quot;DATA_DT=20160310\&quot;&quot;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            CommandLine commandline = CommandLine.parse(command);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            DefaultExecutor exec = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; DefaultExecutor();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            exec.setExitValue(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            ExecuteWatchdog watchdog = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; ExecuteWatchdog(&lt;span class=&quot;number&quot;&gt;60&lt;/span&gt;*&lt;span class=&quot;number&quot;&gt;1000&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            exec.setWatchdog(watchdog);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            ByteArrayOutputStream outputStream = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; ByteArrayOutputStream();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            ByteArrayOutputStream errorStream = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; ByteArrayOutputStream();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            PumpStreamHandler streamHandler = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; PumpStreamHandler(outputStream,errorStream);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            exec.setStreamHandler(streamHandler);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            int execute = exec.execute(commandline);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;String&lt;/span&gt; out = outputStream.toString(&lt;span class=&quot;string&quot;&gt;&quot;gbk&quot;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;String&lt;/span&gt; error = errorStream.toString(&lt;span class=&quot;string&quot;&gt;&quot;gbk&quot;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            System.out.println(&lt;span class=&quot;string&quot;&gt;&quot;out&quot;&lt;/span&gt;+out);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            System.out.println(&lt;span class=&quot;string&quot;&gt;&quot;error&quot;&lt;/span&gt;+error);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            System.out.println(&lt;span class=&quot;string&quot;&gt;&quot;exit: &quot;&lt;/span&gt; + execute);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125; &lt;span class=&quot;keyword&quot;&gt;catch&lt;/span&gt; (Exception e) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h5 id=&quot;1-我当时的测试环境是Windows，使用了上面的接口处理kettle命令，这个-CommandLine-commandline-CommandLine-parse-shellInfo-的时候，命令还是正常的，到了处理的时候execute-exec-execute-commandline-就导致了命令符号的一些丢失，比如；&quot;&gt;&lt;a href=&quot;#1-我当时的测试环境是Windows，使用了上面的接口处理kettle命令，这个-CommandLine-commandline-CommandLine-parse-shellInfo-的时候，命令还是正常的，到了处理的时候execute-exec-execute-commandline-就导致了命令符号的一些丢失，比如；&quot; class=&quot;headerlink&quot; title=&quot;1. 我当时的测试环境是Windows，使用了上面的接口处理kettle命令，这个 CommandLine commandline = CommandLine.parse(shellInfo);的时候，命令还是正常的，到了处理的时候execute = exec.execute(commandline);就导致了命令符号的一些丢失，比如；=&quot;&gt;&lt;/a&gt;1. 我当时的测试环境是Windows，使用了上面的接口处理kettle命令，这个 CommandLine commandline = CommandLine.parse(shellInfo);的时候，命令还是正常的，到了处理的时候execute = exec.execute(commandline);就导致了命令符号的一些丢失，比如；=&lt;/h5&gt;&lt;h5 id=&quot;2-后来想了很久，查找很多资料换了一种方式处理，不能通过转义字符来处理，为什么不换一种处理cmd命令的方式了，后来换了如下方式在windoes就可以了。&quot;&gt;&lt;a href=&quot;#2-后来想了很久，查找很多资料换了一种方式处理，不能通过转义字符来处理，为什么不换一种处理cmd命令的方式了，后来换了如下方式在windoes就可以了。&quot; class=&quot;headerlink&quot; title=&quot;2. 后来想了很久，查找很多资料换了一种方式处理，不能通过转义字符来处理，为什么不换一种处理cmd命令的方式了，后来换了如下方式在windoes就可以了。&quot;&gt;&lt;/a&gt;2. 后来想了很久，查找很多资料换了一种方式处理，不能通过转义字符来处理，为什么不换一种处理cmd命令的方式了，后来换了如下方式在windoes就可以了。&lt;/h5&gt;
    
    </summary>
    
      <category term="JavaScript" scheme="http://www.songxiaolang.com/categories/JavaScript/"/>
    
    
      <category term="java_execCommand" scheme="http://www.songxiaolang.com/tags/java-execCommand/"/>
    
      <category term="文章" scheme="http://www.songxiaolang.com/tags/%E6%96%87%E7%AB%A0/"/>
    
  </entry>
  
  <entry>
    <title>Spring使用Quartz定时调度Job无法Autowired注入Service的解决方案</title>
    <link href="http://www.songxiaolang.com/2018/01/22/Spring_Quartz_Job_Autowired/"/>
    <id>http://www.songxiaolang.com/2018/01/22/Spring_Quartz_Job_Autowired/</id>
    <published>2018-01-22T05:27:22.000Z</published>
    <updated>2018-02-04T06:29:25.281Z</updated>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Spring使用Quartz定时调度Job无法Autowired注入Service的解决方案&quot;&gt;&lt;a href=&quot;#Spring使用Quartz定时调度Job无法Autowired注入Service的解决方案&quot; class=&quot;headerlink&quot; title=&quot;Spring使用Quartz定时调度Job无法Autowired注入Service的解决方案&quot;&gt;&lt;/a&gt;Spring使用Quartz定时调度Job无法Autowired注入Service的解决方案&lt;/h3&gt;&lt;h4 id=&quot;1-当时我有个项目要使用调度，所以选择Spring-Quartz，但是遇到了问题就是无法Autowired注入Service。&quot;&gt;&lt;a href=&quot;#1-当时我有个项目要使用调度，所以选择Spring-Quartz，但是遇到了问题就是无法Autowired注入Service。&quot; class=&quot;headerlink&quot; title=&quot;1. 当时我有个项目要使用调度，所以选择Spring-Quartz，但是遇到了问题就是无法Autowired注入Service。&quot;&gt;&lt;/a&gt;1. 当时我有个项目要使用调度，所以选择Spring-Quartz，但是遇到了问题就是无法Autowired注入Service。&lt;/h4&gt;&lt;h4 id=&quot;2-利用Quartz可以实现定时任务，但在跟Spring整合后，直接在Job中注解方式注入Service后运行却报空指针异常。&quot;&gt;&lt;a href=&quot;#2-利用Quartz可以实现定时任务，但在跟Spring整合后，直接在Job中注解方式注入Service后运行却报空指针异常。&quot; class=&quot;headerlink&quot; title=&quot;2. 利用Quartz可以实现定时任务，但在跟Spring整合后，直接在Job中注解方式注入Service后运行却报空指针异常。&quot;&gt;&lt;/a&gt;2. 利用Quartz可以实现定时任务，但在跟Spring整合后，直接在Job中注解方式注入Service后运行却报空指针异常。&lt;/h4&gt;&lt;p&gt;原因是Quartz初始化是自己的JobContext，不同于Spring的ApplicationContext，所以无法直接注入&lt;/p&gt;
&lt;h4 id=&quot;3-具体做法是直接getBean-的方式来获取service的&quot;&gt;&lt;a href=&quot;#3-具体做法是直接getBean-的方式来获取service的&quot; class=&quot;headerlink&quot; title=&quot;3.具体做法是直接getBean()的方式来获取service的&quot;&gt;&lt;/a&gt;3.具体做法是直接getBean()的方式来获取service的&lt;/h4&gt;&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;public &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;DispatchWork&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Job&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;     @Override&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    public &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; execute(JobExecutionContext jobExecutionContext) throws JobExecutionException &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;String&lt;/span&gt; jobName = jobExecutionContext.getJobDetail().getKey().getName();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;String&lt;/span&gt; group = jobExecutionContext.getTrigger().getKey().getGroup();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;         RunKettleSerive  runKettleSerive= SpringContextHolder.getBean(RunKettleSerive.class);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;         runKettleSerive.runKettleScript(jobName,group);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;      &lt;span class=&quot;comment&quot;&gt;/*  runKettleSerive.runKettleScript(jobName,group);*/&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;4-关键代码就是RunKettleSerive-runKettleSerive-SpringContextHolder-getBean-RunKettleSerive-class-。&quot;&gt;&lt;a href=&quot;#4-关键代码就是RunKettleSerive-runKettleSerive-SpringContextHolder-getBean-RunKettleSerive-class-。&quot; class=&quot;headerlink&quot; title=&quot;4.关键代码就是RunKettleSerive  runKettleSerive= SpringContextHolder.getBean(RunKettleSerive.class)。&quot;&gt;&lt;/a&gt;4.关键代码就是RunKettleSerive  runKettleSerive= SpringContextHolder.getBean(RunKettleSerive.class)。&lt;/h3&gt;
    
    </summary>
    
      <category term="Spring" scheme="http://www.songxiaolang.com/categories/Spring/"/>
    
    
      <category term="文章" scheme="http://www.songxiaolang.com/tags/%E6%96%87%E7%AB%A0/"/>
    
      <category term="Quartz" scheme="http://www.songxiaolang.com/tags/Quartz/"/>
    
  </entry>
  
  <entry>
    <title>AJAX POST数据中有特殊符号导致数据丢失的解决方法</title>
    <link href="http://www.songxiaolang.com/2016/09/22/data_exists_special_symbols/"/>
    <id>http://www.songxiaolang.com/2016/09/22/data_exists_special_symbols/</id>
    <published>2016-09-22T05:27:22.000Z</published>
    <updated>2017-09-25T09:03:34.738Z</updated>
    
    <summary type="html">
    
      &lt;h1 id=&quot;使用Ajax传送数据时，当数据中存在加号-、连接符-amp-或者百分号-时，服务器端接收数据时会丢失数据。分析Ajax传送数据的格式与Javascript的语法：&quot;&gt;&lt;a href=&quot;#使用Ajax传送数据时，当数据中存在加号-、连接符-amp-或者百分号-时，服务器端接收数据时会丢失数据。分析Ajax传送数据的格式与Javascript的语法：&quot; class=&quot;headerlink&quot; title=&quot;使用Ajax传送数据时，当数据中存在加号(+)、连接符(&amp;amp;)或者百分号(%)时，服务器端接收数据时会丢失数据。分析Ajax传送数据的格式与Javascript的语法：&quot;&gt;&lt;/a&gt;使用Ajax传送数据时，当数据中存在加号(+)、连接符(&amp;amp;)或者百分号(%)时，服务器端接收数据时会丢失数据。分析Ajax传送数据的格式与Javascript的语法：&lt;/h1&gt;&lt;h2 id=&quot;1-“-”号：JavaScript解析为字符串连接符，所以服务器端接收数据时”-”会丢失变空格。&quot;&gt;&lt;a href=&quot;#1-“-”号：JavaScript解析为字符串连接符，所以服务器端接收数据时”-”会丢失变空格。&quot; class=&quot;headerlink&quot; title=&quot;1. “+”号：JavaScript解析为字符串连接符，所以服务器端接收数据时”+”会丢失变空格。&quot;&gt;&lt;/a&gt;1. “+”号：JavaScript解析为字符串连接符，所以服务器端接收数据时”+”会丢失变空格。&lt;/h2&gt;&lt;h2 id=&quot;2-“-amp-”号：JavaScript解析为变量连接符，所以服务器端接收数据时-amp-符号以后的数据都会丢失变空格。&quot;&gt;&lt;a href=&quot;#2-“-amp-”号：JavaScript解析为变量连接符，所以服务器端接收数据时-amp-符号以后的数据都会丢失变空格。&quot; class=&quot;headerlink&quot; title=&quot;2. “&amp;amp;”号：JavaScript解析为变量连接符，所以服务器端接收数据时&amp;amp;符号以后的数据都会丢失变空格。&quot;&gt;&lt;/a&gt;2. “&amp;amp;”号：JavaScript解析为变量连接符，所以服务器端接收数据时&amp;amp;符号以后的数据都会丢失变空格。&lt;/h2&gt;
    
    </summary>
    
      <category term="JavaScript" scheme="http://www.songxiaolang.com/categories/JavaScript/"/>
    
    
      <category term="文章" scheme="http://www.songxiaolang.com/tags/%E6%96%87%E7%AB%A0/"/>
    
      <category term="Ajax" scheme="http://www.songxiaolang.com/tags/Ajax/"/>
    
  </entry>
  
</feed>
